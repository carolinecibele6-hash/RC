<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>R&C GOLD LUXURY</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700;900&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>

    <style>
        :root { 
            --gold-primary: #D4AF37; /* Ouro Nobre */
            --gold-bright: #FFD700;
            --black-pure: #000000;
            --black-soft: #0a0a0a;
            --gray-vibe: #1a1a1a;
        }
        
        * { margin: 0; padding: 0; box-sizing: border-box; outline: none; user-select: none; font-family: 'Montserrat', sans-serif; }
        
        body { background-color: var(--black-pure); color: #fff; width: 100vw; height: 100vh; overflow: hidden; }

        .hide { display: none !important; }
        .layer { position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: 10; background: var(--black-pure); }

        /* FOCO VIP - BORDA DUPLA E BRILHO */
        .focused {
            border: 3px solid var(--gold-bright) !important;
            background: var(--gold-primary) !important;
            color: var(--black-pure) !important;
            transform: scale(1.03);
            box-shadow: 0 0 20px rgba(212, 175, 55, 0.6);
            z-index: 100;
        }
        .focused * { color: var(--black-pure) !important; }

        /* LOGIN LUXURY */
        .login-box { width: 450px; padding: 40px; border: 2px solid var(--gold-primary); background: var(--black-soft); border-radius: 8px; text-align: center; }
        .inp { width: 100%; padding: 15px; margin: 10px 0; background: #111; border: 1px solid #333; color: #fff; border-radius: 4px; font-weight: bold; font-size: 16px; }
        .btn { width: 100%; padding: 18px; margin-top: 20px; background: var(--gold-primary); color: #000; border: none; font-weight: 900; letter-spacing: 2px; border-radius: 4px; cursor: pointer; }

        /* DASHBOARD VIP PRINCIPAL */
        #dash-layer { padding: 40px 60px; display: flex; flex-direction: column; justify-content: space-between; }
        .header-vip { display: flex; justify-content: space-between; align-items: flex-start; border-bottom: 2px solid var(--gold-primary); padding-bottom: 20px; }
        
        .user-info-box { display: flex; align-items: center; gap: 20px; }
        .avatar-gold { width: 70px; height: 70px; background: var(--gold-primary); border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 35px; color: #000; box-shadow: 0 0 15px var(--gold-primary); }
        .user-text b { font-size: 24px; color: var(--gold-bright); display: block; text-transform: uppercase; }
        .user-text span { font-size: 14px; color: #888; }

        .clock-box { text-align: right; }
        #clock-time { font-size: 45px; font-weight: 900; color: #fff; line-height: 1; }
        #clock-date { font-size: 16px; color: var(--gold-primary); text-transform: uppercase; margin-top: 5px; }

        .main-nav { display: flex; gap: 30px; justify-content: center; flex: 1; align-items: center; }
        .nav-card { 
            width: 320px; height: 350px; background: var(--gray-vibe); border: 1px solid #222; 
            border-radius: 12px; display: flex; flex-direction: column; align-items: center; justify-content: center; transition: 0.3s;
        }
        .nav-card i { font-size: 80px; color: var(--gold-primary); margin-bottom: 30px; }
        .nav-card span { font-size: 24px; font-weight: 900; letter-spacing: 2px; }

        /* FOOTER COM DADOS DE CONTA */
        .footer-stats { display: grid; grid-template-columns: repeat(4, 1fr); gap: 20px; padding: 20px; background: #080808; border-top: 1px solid #222; }
        .stat-card { border-left: 4px solid var(--gold-primary); padding-left: 15px; }
        .stat-card label { font-size: 11px; color: #666; text-transform: uppercase; font-weight: bold; display: block; }
        .stat-card value { font-size: 18px; color: #fff; font-weight: 800; }

        /* BUSCA GLOBAL E LISTA */
        .content-container { display: flex; height: 100%; }
        .side-bar { width: 20%; background: #050505; border-right: 1px solid var(--gold-primary); overflow-y: auto; }
        .list-bar { width: 30%; background: #0a0a0a; border-right: 1px solid #222; display: flex; flex-direction: column; }
        .player-bar { flex: 1; background: #000; display: flex; flex-direction: column; }

        .search-container { padding: 15px; background: #000; }
        .cat-item { padding: 20px; border-bottom: 1px solid #111; color: #aaa; font-weight: bold; cursor: pointer; }
        .cat-item.active { background: #111; color: var(--gold-bright); border-left: 6px solid var(--gold-bright); }
        .stream-item { padding: 15px 20px; border-bottom: 1px solid #151515; color: #eee; font-size: 14px; }

        /* PLAYER NATIVO OTIMIZADO */
        .vid-wrapper { width: 100%; height: 50%; background: #000; border-bottom: 2px solid var(--gold-primary); position: relative; }
        video { width: 100%; height: 100%; object-fit: contain; }
        .stream-meta { padding: 30px; }
        .stream-title { font-size: 30px; font-weight: 900; color: var(--gold-primary); margin-bottom: 15px; }
        .stream-desc { font-size: 15px; color: #888; line-height: 1.6; max-height: 150px; overflow-y: auto; }

        /* LOADER VIP */
        #loader { background: var(--black-pure); z-index: 10000; flex-direction: column; }
        .gold-spinner { width: 80px; height: 80px; border: 6px solid #111; border-top: 6px solid var(--gold-primary); border-radius: 50%; animation: spin 1s linear infinite; }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
    </style>
</head>
<body onload="App.init()">

    <div id="loader" class="layer hide flex-center" style="display: flex;">
        <div class="gold-spinner"></div>
        <h2 style="margin-top:20px; color:var(--gold-primary); letter-spacing:4px;">R&C GOLD LUXURY</h2>
    </div>

    <div id="login-layer" class="layer flex-center">
        <div class="login-box">
            <h1 style="color:var(--gold-primary); font-weight:900; margin-bottom:30px;">ACESSO <span style="color:#fff">VIP</span></h1>
            <input type="text" id="i0" class="inp focusable" placeholder="SERVIDOR URL">
            <input type="text" id="i1" class="inp focusable" placeholder="USUÁRIO">
            <input type="password" id="i2" class="inp focusable" placeholder="SENHA">
            <button id="i3" class="btn focusable" onclick="App.login()">CONECTAR AO LUXURY</button>
            <p id="msg-login" style="margin-top:15px; color:#ff4444; font-weight:bold;"></p>
        </div>
    </div>

    <div id="dash-layer" class="layer hide">
        <div class="header-vip">
            <div class="user-info-box">
                <div class="avatar-gold"><i class="fas fa-user-tie"></i></div>
                <div class="user-text">
                    <b id="user-display">CLIENTE GOLD</b>
                    <span id="user-status">CONTA PREMIUM ATIVA</span>
                </div>
            </div>
            <div class="clock-box">
                <div id="clock-time">00:00</div>
                <div id="clock-date">SEGUNDA, 09 DE FEVEREIRO</div>
            </div>
        </div>

        <div class="main-nav">
            <div id="m0" class="nav-card focusable" onclick="App.openMode('live')">
                <i class="fas fa-tv"></i><span>TV AO VIVO</span>
            </div>
            <div id="m1" class="nav-card focusable" onclick="App.openMode('movie')">
                <i class="fas fa-film"></i><span>FILMES 4K</span>
            </div>
            <div id="m2" class="nav-card focusable" onclick="App.openMode('series')">
                <i class="fas fa-box-open"></i><span>SÉRIES VIP</span>
            </div>
        </div>

        <div class="footer-stats">
            <div class="stat-card">
                <label>Vencimento</label>
                <value id="val-exp">--/--/----</value>
            </div>
            <div class="stat-card">
                <label>Limite de Telas</label>
                <value id="val-conn">0 / 0</value>
            </div>
            <div class="stat-card">
                <label>Criado em</label>
                <value id="val-created">--/--/----</value>
            </div>
            <div id="m3" class="stat-card focusable" onclick="App.logout()" style="background:#1a0000; border-color:#f00; cursor:pointer;">
                <label style="color:#f88">Encerrar Sessão</label>
                <value>LOGOUT</value>
            </div>
        </div>
    </div>

    <div id="content-layer" class="layer hide">
        <div class="content-container">
            <div class="side-bar" id="cat-list"></div>
            <div class="list-bar">
                <div class="search-container">
                    <input type="text" id="search" class="inp focusable" placeholder="BUSCA GLOBAL VIP...">
                </div>
                <div id="item-list" style="overflow-y:auto; flex:1;"></div>
            </div>
            <div class="player-bar">
                <div id="vid-box" class="vid-wrapper focusable">
                    <video id="player" poster="https://i.imgur.com/8N4pL0W.png"></video>
                </div>
                <div class="stream-meta">
                    <div id="meta-title" class="stream-title">R&C GOLD LUXURY</div>
                    <div id="meta-desc" class="stream-desc">Selecione um canal ou filme para iniciar a transmissão em alta fidelidade.</div>
                </div>
            </div>
        </div>
    </div>

    <script>
        var App = {
            scr: 0, zone: 0, idx: 0, creds: {}, fullData: [],
            
            init: function() {
                this.updateClock();
                setInterval(() => this.updateClock(), 10000);
                if(localStorage.getItem('rc_u')) {
                    document.getElementById('i0').value = localStorage.getItem('rc_h');
                    document.getElementById('i1').value = localStorage.getItem('rc_u');
                    document.getElementById('i2').value = localStorage.getItem('rc_p');
                }
                setTimeout(() => { document.getElementById('loader').classList.add('hide'); }, 1500);
                this.updateFocus();
            },

            updateClock: function() {
                var now = new Date();
                document.getElementById('clock-time').innerText = now.getHours().toString().padStart(2, '0') + ":" + now.getMinutes().toString().padStart(2, '0');
                document.getElementById('clock-date').innerText = now.toLocaleDateString('pt-BR', { weekday: 'long', day: 'numeric', month: 'long' }).toUpperCase();
            },

            login: function() {
                var h = document.getElementById('i0').value, u = document.getElementById('i1').value, p = document.getElementById('i2').value;
                if(!h || !u || !p) return;
                
                document.getElementById('loader').classList.remove('hide');
                fetch(`${h}/player_api.php?username=${u}&password=${p}`)
                .then(r => r.json()).then(d => {
                    document.getElementById('loader').classList.add('hide');
                    if(d.user_info && d.user_info.auth == 1) {
                        App.creds = {h, u, p};
                        localStorage.setItem('rc_h', h); localStorage.setItem('rc_u', u); localStorage.setItem('rc_p', p);
                        
                        document.getElementById('user-display').innerText = u;
                        document.getElementById('val-exp').innerText = d.user_info.exp_date ? new Date(d.user_info.exp_date*1000).toLocaleDateString() : "ILIMITADO";
                        document.getElementById('val-conn').innerText = `${d.user_info.active_cons || 0} / ${d.user_info.max_connections || 1}`;
                        document.getElementById('val-created').innerText = d.user_info.created_at ? new Date(d.user_info.created_at*1000).toLocaleDateString() : "--";
                        
                        App.setScr(1);
                    } else {
                        document.getElementById('msg-login').innerText = "ERRO: CREDENCIAIS INVÁLIDAS";
                    }
                }).catch(() => {
                    document.getElementById('loader').classList.add('hide');
                    document.getElementById('msg-login').innerText = "ERRO DE CONEXÃO (VERIFIQUE O DNS)";
                });
            },

            setScr: function(n) {
                document.querySelectorAll('.layer').forEach(l => l.classList.add('hide'));
                if(n===1) document.getElementById('dash-layer').classList.remove('hide');
                if(n===2) document.getElementById('content-layer').classList.remove('hide');
                if(n===0) document.getElementById('login-layer').classList.remove('hide');
                this.scr = n; this.zone = 0; this.idx = 0; this.updateFocus();
            },

            openMode: function(m) {
                this.mode = m;
                document.getElementById('loader').classList.remove('hide');
                var act = m === 'live' ? 'get_live_categories' : (m === 'movie' ? 'get_vod_categories' : 'get_series_categories');
                
                fetch(`${this.creds.h}/player_api.php?username=${this.creds.u}&password=${this.creds.p}&action=${act}`)
                .then(r => r.json()).then(d => {
                    document.getElementById('loader').classList.add('hide');
                    var html = '';
                    d.forEach((c, i) => {
                        html += `<div class="cat-item focusable" id="c${i}" onclick="App.loadCat('${c.category_id}', ${i})">${c.category_name}</div>`;
                    });
                    document.getElementById('cat-list').innerHTML = html;
                    this.setScr(2);
                });
            },

            loadCat: function(cid, bIdx) {
                document.getElementById('loader').classList.remove('hide');
                var act = this.mode === 'live' ? 'get_live_streams' : (this.mode === 'movie' ? 'get_vod_streams' : 'get_series');
                
                fetch(`${this.creds.h}/player_api.php?username=${this.creds.u}&password=${this.creds.p}&action=${act}&category_id=${cid}`)
                .then(r => r.json()).then(d => {
                    document.getElementById('loader').classList.add('hide');
                    this.fullData = d;
                    var html = '';
                    d.slice(0, 150).forEach((item, i) => {
                        html += `<div class="stream-item focusable" id="row-${i}" onclick="App.play(${i})">${item.name || item.title}</div>`;
                    });
                    document.getElementById('item-list').innerHTML = html;
                    this.zone = 2; this.idx = 0; this.updateFocus();
                });
            },

            play: function(i) {
                var item = this.fullData[i];
                var type = this.mode === 'live' ? 'live' : (this.mode === 'movie' ? 'movie' : 'series');
                var ext = item.container_extension || (this.mode === 'live' ? 'ts' : 'mp4');
                var url = `${this.creds.h}/${type}/${this.creds.u}/${this.creds.p}/${item.stream_id || item.series_id}.${ext}`;
                
                document.getElementById('meta-title').innerText = item.name || item.title;
                var vid = document.getElementById('player');
                
                if(this.mode === 'live' && Hls.isSupported()) {
                    if(this.hls) this.hls.destroy();
                    this.hls = new Hls();
                    this.hls.loadSource(url);
                    this.hls.attachMedia(vid);
                    this.hls.on(Hls.Events.MANIFEST_PARSED, () => vid.play());
                } else {
                    vid.src = url;
                    vid.play();
                }
            },

            updateFocus: function() {
                document.querySelectorAll('.focused').forEach(e => e.classList.remove('focused'));
                var id = (this.scr === 0) ? 'i'+this.idx : (this.scr === 1) ? 'm'+this.idx : 
                         (this.zone === 0) ? 'c'+this.idx : (this.zone === 1) ? 'search' : 
                         (this.zone === 2) ? 'row-'+this.idx : 'vid-box';
                
                var el = document.getElementById(id);
                if(el) {
                    el.classList.add('focused');
                    el.scrollIntoView({block:'center', behavior:'smooth'});
                    if(el.tagName === 'INPUT') el.focus();
                }
            },

            logout: function() { localStorage.clear(); location.reload(); }
        };

        document.onkeydown = function(e) {
            var k = e.keyCode;
            if(k === 38) App.idx > 0 ? App.idx-- : null; // Up
            if(k === 40) App.idx++; // Down
            if(k === 37 && App.zone > 0) App.zone--; // Left
            if(k === 39 && App.zone < 3) App.zone++; // Right
            if(k === 13) {
                if(App.scr === 0) App.login();
                else if(App.scr === 1) (App.idx === 3) ? App.logout() : App.openMode(['live','movie','series'][App.idx]);
                else (App.zone === 0) ? document.getElementById('c'+App.idx).click() : App.play(App.idx);
            }
            if(k === 8 || k === 461) App.setScr(1);
            App.updateFocus();
        };
    </script>
</body>
</html>
