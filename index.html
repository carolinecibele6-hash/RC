// --- GLOBAL KEY LISTENER ---
        function doLogin() { App.login(); } // Wrapper
        
        document.addEventListener('keydown', (e) => {
            let k = e.keyCode;
            
            // LOGIN INPUTS (Navegação básica)
            if(App.screen === 'login') {
                if(k===13) document.activeElement.click();
                if(k===40) { // Descer input
                    let map = ['h','u','p','btnEnter'];
                    let curr = map.indexOf(document.activeElement.id);
                    if(curr < 3) document.getElementById(map[curr+1]).focus();
                }
                if(k===38) { // Subir input
                    let map = ['h','u','p','btnEnter'];
                    let curr = map.indexOf(document.activeElement.id);
                    if(curr > 0) document.getElementById(map[curr-1]).focus();
                }
                return;
            }

            // APP
            if([37,38,39,40].includes(k)) e.preventDefault(); // Previne scroll

            // LÓGICA DO BOTÃO VOLTAR (CORRIGIDA)
            // 8: Backspace, 461: Return (LG), 27: Esc, 10009: Return (Tizen)
            if(k === 8 || k === 461 || k === 27 || k === 10009) {
                if(document.fullscreenElement) {
                    document.exitFullscreen();
                } 
                else if(App.zone === 2) { 
                    // Estava na lista de filmes -> Volta para categorias
                    App.zone = 1; 
                    
                    // Tenta focar na categoria que estava ativa
                    let active = document.querySelector('.item-cat.active');
                    if(active) {
                        let id = parseInt(active.id.split('-')[1]);
                        App.focusIdx = id;
                    } else {
                        App.focusIdx = 0;
                    }
                    App.renderFocus(); 
                }
                else if(App.zone === 1) {
                    // Estava nas categorias -> Volta para o menu do topo
                    App.zone = 0;
                    App.focusIdx = 0; // Foca no primeiro item do topo
                    App.renderFocus();
                }
                return;
            }

            App.handleKey(k);
        });
