<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>R&C IPTV GOLD</title>
    <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
    <style>
        /* --- ESTILO GERAL (DARK/GOLD) --- */
        :root {
            --bg-color: #050505;
            --card-bg: #1a1a1a;
            --gold: #D4AF37;
            --gold-dim: #8a7020;
            --text-color: #ffffff;
            --focus-glow: 0 0 15px rgba(212, 175, 55, 0.6);
        }

        body {
            margin: 0;
            padding: 0;
            background-color: var(--bg-color);
            color: var(--text-color);
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            overflow: hidden; /* Evita rolagem na TV */
            user-select: none;
        }

        /* --- TELA DE LOGIN --- */
        #login-screen {
            position: absolute;
            top: 0; left: 0; width: 100%; height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            background: radial-gradient(circle at center, #1a1a1a 0%, #000 100%);
            z-index: 1000;
        }

        .logo-area h1 {
            color: var(--gold);
            font-size: 3rem;
            margin-bottom: 0.5rem;
            text-transform: uppercase;
            letter-spacing: 5px;
            text-shadow: 0 2px 5px #000;
        }

        .login-box {
            background: rgba(20, 20, 20, 0.9);
            padding: 40px;
            border: 1px solid var(--gold-dim);
            border-radius: 10px;
            width: 400px;
            text-align: center;
            box-shadow: 0 0 20px rgba(0,0,0,0.8);
        }

        .input-group {
            margin-bottom: 20px;
            text-align: left;
        }

        .input-group label {
            display: block;
            color: var(--gold);
            margin-bottom: 5px;
            font-size: 0.9rem;
        }

        .input-field {
            width: 100%;
            padding: 10px;
            background: #333;
            border: 2px solid transparent;
            color: #fff;
            font-size: 1.1rem;
            box-sizing: border-box; /* Garante que padding n√£o estoure */
        }

        /* Foco nos inputs e bot√µes */
        .focusable:focus, .focusable.focused {
            border-color: var(--gold);
            background: #444;
            outline: none;
            box-shadow: var(--focus-glow);
        }

        .btn-gold {
            background: linear-gradient(180deg, var(--gold) 0%, var(--gold-dim) 100%);
            color: #000;
            border: none;
            padding: 12px 30px;
            font-size: 1.2rem;
            font-weight: bold;
            cursor: pointer;
            width: 100%;
            margin-top: 10px;
        }

        /* --- DASHBOARD PRINCIPAL (Escondido inicialmente) --- */
        #main-dashboard {
            display: none; /* S√≥ aparece ap√≥s login */
            height: 100vh;
            display: grid;
            grid-template-rows: 60px 1fr;
        }

        /* Topo */
        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0 40px;
            border-bottom: 2px solid var(--gold-dim);
            background: #0f0f0f;
        }

        .search-bar input {
            background: #222;
            border: 1px solid #444;
            color: #fff;
            padding: 5px 15px;
            width: 300px;
            border-radius: 20px;
        }

        /* √Årea de Conte√∫do */
        .content-area {
            display: flex;
            height: 100%;
        }

        /* Menu Lateral (Categorias) */
        .sidebar {
            width: 250px;
            background: #111;
            padding-top: 20px;
            border-right: 1px solid #333;
        }

        .menu-item {
            padding: 15px 30px;
            color: #aaa;
            font-size: 1.1rem;
            border-left: 4px solid transparent;
        }

        .menu-item.active, .menu-item.focused {
            color: var(--gold);
            background: #222;
            border-left-color: var(--gold);
        }

        /* Grade de Canais/Filmes */
        .grid-container {
            flex: 1;
            padding: 30px;
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
            grid-gap: 20px;
            overflow-y: auto;
        }

        /* Cart√µes (Canais/Filmes) */
        .card {
            background: var(--card-bg);
            border: 2px solid transparent;
            border-radius: 8px;
            height: 120px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            transition: transform 0.2s;
        }

        .card.focused {
            border-color: var(--gold);
            transform: scale(1.05);
            box-shadow: var(--focus-glow);
            z-index: 10;
        }

        .card-icon { font-size: 40px; margin-bottom: 10px; color: #fff; }
        .card-title { font-size: 14px; text-align: center; }

        /* Menu Home (Visual 01) */
        #home-menu {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100%;
            gap: 40px;
        }
        
        .big-card {
            width: 200px;
            height: 200px;
            background: #1a1a1a;
            border: 2px solid #333;
            border-radius: 15px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }
        
        .big-card.focused {
            border-color: var(--gold);
            background: #252525;
            box-shadow: 0 0 30px rgba(212, 175, 55, 0.4);
            transform: scale(1.1);
        }

        /* Player Overlay */
        #player-overlay {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background: #000;
            display: none;
            z-index: 2000;
        }
        video { width: 100%; height: 100%; }

    </style>
</head>
<body>

    <section id="login-screen">
        <div class="logo-area">
            <h1>R&C IPTV GOLD</h1>
            <p style="color: #888;">STB SMART EDITION</p>
        </div>
        <div class="login-box">
            <div class="input-group">
                <label>Usu√°rio</label>
                <input type="text" class="input-field focusable" id="user" placeholder="Digite seu usu√°rio">
            </div>
            <div class="input-group">
                <label>Senha</label>
                <input type="password" class="input-field focusable" id="pass" placeholder="Digite sua senha">
            </div>
            <div class="input-group">
                <label>Servidor (DNS)</label>
                <input type="text" class="input-field focusable" id="server" placeholder="http://exemplo.com">
            </div>
            <button class="btn-gold focusable" onclick="doLogin()">ENTRAR</button>
        </div>
    </section>

    <section id="main-dashboard" style="display: none;">
        <div class="header">
            <div style="color: var(--gold); font-weight: bold; font-size: 24px;">R&C GOLD</div>
            <div class="search-bar">
                <input type="text" class="focusable" id="global-search" placeholder="Pesquisar Canais, Filmes, S√©ries..." onkeyup="filterContent()">
            </div>
            <div id="clock">00:00</div>
        </div>

        <div class="content-area">
            
            <div id="home-view" style="width: 100%; height: 100%;">
                <div id="home-menu">
                    <div class="big-card focusable" onclick="loadCategory('live')">
                        <div class="card-icon">üì∫</div>
                        <h3>TV AO VIVO</h3>
                    </div>
                    <div class="big-card focusable" onclick="loadCategory('movies')">
                        <div class="card-icon">üé¨</div>
                        <h3>FILMES</h3>
                    </div>
                    <div class="big-card focusable" onclick="loadCategory('series')">
                        <div class="card-icon">üéûÔ∏è</div>
                        <h3>S√âRIES</h3>
                    </div>
                    <div class="big-card focusable" onclick="loadCategory('settings')">
                        <div class="card-icon">‚öôÔ∏è</div>
                        <h3>CONFIG</h3>
                    </div>
                </div>
            </div>

            <div id="list-view" style="display: none; width: 100%; display: flex;">
                <div class="sidebar" id="category-list">
                    </div>
                <div class="grid-container" id="content-grid">
                    </div>
            </div>
        </div>
    </section>

    <div id="player-overlay">
        <video id="video-player" controls></video>
    </div>

    <script>
        // --- CONFIGURA√á√ÉO INICIAL ---
        let currentScreen = 'login'; // login, dashboard, player
        let focusIndex = 0;
        let focusableElements = [];

        // Atualiza rel√≥gio
        setInterval(() => {
            const now = new Date();
            document.getElementById('clock').innerText = now.toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'});
        }, 1000);

        // --- SISTEMA DE NAVEGA√á√ÉO (CONTROLE REMOTO) ---
        function updateFocusables() {
            // Pega apenas os elementos vis√≠veis na tela atual
            if (currentScreen === 'login') {
                focusableElements = document.querySelectorAll('#login-screen .focusable');
            } else if (currentScreen === 'dashboard') {
                // Se estiver na Home
                if(document.getElementById('home-view').style.display !== 'none'){
                    focusableElements = document.querySelectorAll('#home-menu .focusable');
                } else {
                    // Se estiver nas listas
                    focusableElements = document.querySelectorAll('#list-view .focusable, .header .focusable');
                }
            }
        }

        function setFocus(index) {
            if (focusableElements.length === 0) return;
            // Remove foco anterior
            focusableElements.forEach(el => el.classList.remove('focused'));
            
            // Ajusta √≠ndice c√≠clico
            if (index >= focusableElements.length) index = 0;
            if (index < 0) index = focusableElements.length - 1;
            
            focusIndex = index;
            focusableElements[focusIndex].classList.add('focused');
            focusableElements[focusIndex].focus();
            
            // Scroll autom√°tico se necess√°rio
            focusableElements[focusIndex].scrollIntoView({block: "center", behavior: "smooth"});
        }

        // Listener de Teclas (Setas e Enter)
        document.addEventListener('keydown', function(e) {
            updateFocusables();
            
            switch(e.key) {
                case 'ArrowDown':
                    setFocus(focusIndex + 1); // Simplificado para exemplo (em grid real precisa de l√≥gica matem√°tica)
                    break;
                case 'ArrowUp':
                    setFocus(focusIndex - 1);
                    break;
                case 'ArrowRight':
                    setFocus(focusIndex + 1);
                    break;
                case 'ArrowLeft':
                    setFocus(focusIndex - 1);
                    break;
                case 'Enter':
                    focusableElements[focusIndex].click();
                    break;
                case 'Backspace':
                case 'Escape':
                    if(currentScreen === 'player') closePlayer();
                    else if (currentScreen === 'dashboard' && document.getElementById('list-view').style.display !== 'none') showHome();
                    break;
            }
        });

        // Inicializa foco
        window.onload = () => {
            updateFocusables();
            if(focusableElements.length > 0) setFocus(0);
        }

        // --- L√ìGICA DE LOGIN ---
        function doLogin() {
            const user = document.getElementById('user').value;
            const pass = document.getElementById('pass').value;
            
            // Simula√ß√£o de autentica√ß√£o XTREAM CODES
            if(user && pass) {
                // Efeito de transi√ß√£o
                document.getElementById('login-screen').style.opacity = '0';
                setTimeout(() => {
                    document.getElementById('login-screen').style.display = 'none';
                    document.getElementById('main-dashboard').style.display = 'grid'; // Grid layout
                    currentScreen = 'dashboard';
                    showHome();
                }, 500);
            } else {
                alert("Por favor, preencha usu√°rio e senha.");
            }
        }

        // --- NAVEGA√á√ÉO DE TELAS ---
        function showHome() {
            document.getElementById('home-view').style.display = 'block';
            document.getElementById('list-view').style.display = 'none';
            // Reseta o foco para a primeira op√ß√£o da home
            setTimeout(() => {
                updateFocusables();
                setFocus(0);
            }, 100);
        }

        function loadCategory(type) {
            document.getElementById('home-view').style.display = 'none';
            document.getElementById('list-view').style.display = 'flex';
            
            const grid = document.getElementById('content-grid');
            grid.innerHTML = ""; // Limpa

            // Simula carregamento de dados (aqui entraria o parse da lista M3U)
            // Exemplo visual baseado no seu upload
            const demoData = [
                { title: "Globo SP", logo: "üì∫" },
                { title: "SBT", logo: "üì∫" },
                { title: "ESPN", logo: "‚öΩ" },
                { title: "Premiere", logo: "‚öΩ" },
                { title: "Telecine", logo: "üé¨" },
                { title: "HBO", logo: "üé¨" },
                { title: "Discovery", logo: "üåç" },
                { title: "Cartoon", logo: "üß∏" }
            ];

            // Renderiza cart√µes
            demoData.forEach(item => {
                const card = document.createElement('div');
                card.className = 'card focusable';
                card.onclick = () => playStream('http://sample.vodobox.net/skate_phantom_flex_4k/skate_phantom_flex_4k.m3u8'); // Link teste
                card.innerHTML = `<div class="card-icon">${item.logo}</div><div class="card-title">${item.title}</div>`;
                grid.appendChild(card);
            });

            setTimeout(() => {
                updateFocusables();
                setFocus(0);
            }, 100);
        }

        // --- PLAYER COM ANTI-TRAVAMENTO (HLS.JS) ---
        function playStream(url) {
            const overlay = document.getElementById('player-overlay');
            const video = document.getElementById('video-player');
            
            overlay.style.display = 'block';
            currentScreen = 'player';

            if (Hls.isSupported()) {
                const hls = new Hls({
                    // Configura√ß√£o Anti-Travamento
                    maxBufferLength: 30, // Tenta manter 30s de buffer
                    maxMaxBufferLength: 60,
                    enableWorker: true, // Usa web workers para n√£o travar a UI
                });
                hls.loadSource(url);
                hls.attachMedia(video);
                hls.on(Hls.Events.MANIFEST_PARSED, function() {
                    video.play();
                });
            } else if (video.canPlayType('application/vnd.apple.mpegurl')) {
                video.src = url;
                video.addEventListener('loadedmetadata', function() {
                    video.play();
                });
            }
            
            // Auto-Play e Loop de S√©ries (L√≥gica simples)
            video.onended = function() {
                console.log("Epis√≥dio acabou, carregando pr√≥ximo...");
                // Aqui entraria a l√≥gica de buscar o pr√≥ximo index na array
            };
        }

        function closePlayer() {
            const video = document.getElementById('video-player');
            video.pause();
            video.src = "";
            document.getElementById('player-overlay').style.display = 'none';
            currentScreen = 'dashboard';
            updateFocusables();
        }

        // --- PESQUISA GLOBAL ---
        function filterContent() {
            const query = document.getElementById('global-search').value.toLowerCase();
            const cards = document.querySelectorAll('.card');
            
            cards.forEach(card => {
                const title = card.innerText.toLowerCase();
                if(title.includes(query)) {
                    card.style.display = 'flex';
                } else {
                    card.style.display = 'none';
                }
            });
            // Reajusta foco ap√≥s filtro
            updateFocusables();
        }

    </script>
</body>
</html>
