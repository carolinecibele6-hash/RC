<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>R&C GOLD</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;800&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>

    <style>
        /* --- TEMA GOLD VIP (VISUAL PREMIUM) --- */
        :root { 
            --bg: #000000; 
            --gold: #FFD700; 
            --card-bg: linear-gradient(145deg, #1a1a1a, #0d0d0d);
            --focus-grad: linear-gradient(135deg, #FFD700 0%, #FFA500 100%);
            --border-dim: #333333;
        }
        
        * { margin: 0; padding: 0; box-sizing: border-box; outline: none; user-select: none; -webkit-tap-highlight-color: transparent; }
        
        body {
            background-color: var(--bg); 
            color: #fff;
            font-family: 'Montserrat', sans-serif;
            width: 100vw; height: 100vh; overflow: hidden;
            background-image: radial-gradient(circle at 50% 0%, #151000 0%, #000 85%);
        }

        .hide { display: none !important; }
        .flex-center { display: flex; align-items: center; justify-content: center; }
        .layer { position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: 10; background: #000; }

        /* FOCO GOLD VIP */
        .focused {
            border: 3px solid #fff !important;
            background: var(--focus-grad) !important;
            color: #000 !important;
            transform: scale(1.05);
            z-index: 50;
            box-shadow: 0 0 30px rgba(255, 215, 0, 0.6);
        }
        
        .focused i, .focused span, .focused div { color: #000 !important; }

        /* LOGIN */
        .login-box { 
            width: 400px; max-width: 90%; padding: 40px; 
            background: #111; border: 1px solid var(--border-dim); 
            border-radius: 12px; text-align: center; 
        }
        .logo-txt { font-size: 32px; font-weight: 900; letter-spacing: -1px; color:#fff; margin-bottom: 20px; }
        .logo-txt span { color: var(--gold); }
        .inp { width: 100%; padding: 14px; margin: 10px 0; background: #000; border: 1px solid #333; color: var(--gold); text-align: center; font-weight: bold; border-radius: 6px; font-size: 16px; }
        .btn { width: 100%; padding: 14px; margin-top: 20px; background: var(--gold); color: #000; border: none; text-transform: uppercase; font-weight: 900; border-radius: 6px; cursor: pointer; }

        /* DASHBOARD CENTRALIZADO */
        #dash-layer { display: flex; flex-direction: column; align-items: center; justify-content: center; }
        .top-bar { position: absolute; top: 40px; width: 90%; display: flex; justify-content: space-between; align-items: center; }
        .dash-logo { font-size: 40px; font-weight: 900; letter-spacing: -2px; }
        .dash-logo span { color: var(--gold); }
        .clock-time { font-size: 32px; font-weight: 700; color: #fff; }

        .dash-grid { display: flex; gap: 40px; align-items: center; justify-content: center; flex: 1; }
        .smart-card { 
            width: 260px; height: 300px;
            background: var(--card-bg);
            border: 2px solid var(--border-dim);
            border-radius: 20px;
            display: flex; flex-direction: column; align-items: center; justify-content: center;
        }
        .smart-card i { font-size: 70px; margin-bottom: 25px; color: #555; }
        .smart-card span { font-size: 18px; font-weight: 800; text-transform: uppercase; letter-spacing: 2px; color: #ccc; }

        /* INFO BAR */
        .bottom-bar { position: absolute; bottom: 40px; display: flex; gap: 30px; }
        .info-pill { 
            background: #0b0b0b; padding: 15px 35px; border-radius: 50px; 
            border: 1px solid var(--border-dim); text-align: center;
            min-width: 200px;
        }
        .lbl { font-size: 10px; color: #666; font-weight: 800; text-transform: uppercase; margin-bottom: 4px; }
        .val { font-size: 16px; color: var(--gold); font-weight: 800; }

        /* CONTEÚDO */
        #content-layer { display: flex; }
        .col-cat { width: 25%; background: #050505; border-right: 1px solid #222; display: flex; flex-direction: column; }
        .cat-head { padding: 25px; background: #000; color: var(--gold); font-weight: 900; text-align: center; border-bottom: 2px solid var(--gold); font-size: 18px; }
        .cat-list { flex: 1; overflow-y: auto; }
        .cat-item { padding: 15px 25px; border-bottom: 1px solid #1a1a1a; color: #888; font-size: 14px; font-weight: 600; }
        .cat-item.active { border-left: 5px solid var(--gold); background: #111; color: #fff; }

        .col-list { width: 30%; background: #0a0a0a; border-right: 1px solid #222; display: flex; flex-direction: column; }
        .search-area { padding: 20px; background: #080808; border-bottom: 1px solid #333; }
        .inp-search { width: 100%; background: #151515; border: 1px solid #333; color: #fff; padding: 12px; text-align: center; font-weight: bold; border-radius: 6px; }
        .item-list { flex: 1; overflow-y: auto; }
        .item { padding: 15px 25px; border-bottom: 1px solid #1a1a1a; color: #bbb; font-size: 15px; }
        .item.playing { color: var(--gold); font-weight: 900; background: #151000; border-left: 3px solid var(--gold); }

        .col-play { flex: 1; background: #000; display: flex; flex-direction: column; position: relative; }
        .vid-box { width: 100%; height: 50vh; background: #000; position: relative; border-bottom: 2px solid #333; }
        video { width: 100%; height: 100%; object-fit: contain; }
        
        .vid-box.fs { position: fixed !important; top: 0 !important; left: 0 !important; width: 100vw !important; height: 100vh !important; z-index: 9999 !important; border: none !important; }

        .meta { padding: 35px; flex: 1; background: #080808; display: flex; flex-direction: column; }
        .meta-title { font-size: 28px; color: #fff; font-weight: 800; margin-bottom: 10px; }
        .meta-epg { font-size: 14px; color: var(--gold); font-weight: 700; margin-bottom: 15px; }
        .meta-desc { font-size: 15px; color: #777; line-height: 1.6; flex: 1; overflow: hidden; }

        .keys { display: flex; gap: 25px; margin-top: 25px; padding-top: 25px; border-top: 1px solid #222; }
        .key { font-size: 12px; font-weight: bold; color: #aaa; text-transform: uppercase; display: flex; align-items: center; gap: 8px; }
        .dot { width: 14px; height: 14px; border-radius: 50%; }

        #osd { position: absolute; top: 30px; right: 30px; background: rgba(0,0,0,0.9); color: var(--primary); padding: 10px 20px; border: 1px solid var(--primary); border-radius: 6px; font-weight: 800; display: none; z-index: 10000; }
        #loader { background: rgba(0,0,0,0.98); z-index: 20000; flex-direction: column; color: var(--gold); }
    </style>
</head>
<body onload="App.init()">

    <div id="loader" class="hide flex-center">
        <i class="fas fa-circle-notch fa-spin" style="font-size:50px; margin-bottom:20px"></i>
        <div style="font-weight:900; letter-spacing:2px">CARREGANDO...</div>
    </div>

    <div id="login-layer" class="layer flex-center">
        <div class="login-box">
            <div class="logo-txt">R&C <span>GOLD</span></div>
            <input type="text" id="i0" class="inp focusable" placeholder="URL DNS" autocomplete="off">
            <input type="text" id="i1" class="inp focusable" placeholder="USUÁRIO" autocomplete="off">
            <input type="password" id="i2" class="inp focusable" placeholder="SENHA" autocomplete="off">
            <button id="i3" class="btn focusable" onclick="App.login()">CONECTAR</button>
            <div id="msg-login" style="color:#ff4444; margin-top:10px; font-size:12px; font-weight:bold;"></div>
        </div>
    </div>

    <div id="dash-layer" class="layer hide">
        <div class="top-bar">
            <div class="dash-logo">R&C <span>GOLD</span></div>
            <div class="dash-clock"><div id="clock-time" class="clock-time">12:00</div></div>
        </div>

        <div class="dash-grid">
            <div id="m0" class="smart-card focusable" onclick="App.openMode('live')"><i class="fas fa-tv"></i><span>TV AO VIVO</span></div>
            <div id="m1" class="smart-card focusable" onclick="App.openMode('movie')"><i class="fas fa-film"></i><span>FILMES</span></div>
            <div id="m2" class="smart-card focusable" onclick="App.openMode('series')"><i class="fas fa-layer-group"></i><span>SÉRIES</span></div>
        </div>

        <div class="bottom-bar">
            <div class="info-pill"><span class="lbl">VENCIMENTO</span><span id="info-exp" class="val">...</span></div>
            <div id="m3" class="info-pill focusable" onclick="App.logout()"><span class="lbl">SISTEMA</span><span class="val" style="color:#ff4444">SAIR</span></div>
        </div>
    </div>

    <div id="content-layer" class="layer hide">
        <div class="col-cat">
            <div class="cat-head">CATEGORIAS</div>
            <div id="cat-list" class="cat-list"></div>
        </div>
        <div class="col-list">
            <div class="search-area">
                <input type="text" id="search" class="inp-search focusable" placeholder="PESQUISAR..." autocomplete="off">
            </div>
            <div id="item-list" class="item-list"></div>
        </div>
        <div class="col-play">
            <div id="vid-box" class="vid-box focusable">
                <video id="player" playsinline webkit-playsinline></video>
                <div id="osd">BUFFERING...</div>
            </div>
            <div class="meta">
                <div id="meta-title" class="meta-title">R&C GOLD</div>
                <div id="meta-epg" class="meta-epg"></div>
                <div id="meta-desc" class="meta-desc">Selecione um conteúdo.</div>
                <div class="keys">
                    <div class="key"><div class="dot" style="background:#ff4444"></div> FULLSCREEN</div>
                    <div class="key"><div class="dot" style="background:#00C851"></div> TOPO</div>
                    <div class="key"><div class="dot" style="background:#ffbb33"></div> BUSCA</div>
                    <div class="key"><div class="dot" style="background:#33b5e5"></div> MENU</div>
                </div>
            </div>
        </div>
    </div>

    <script>
        var PlayerEngine = {
            hls: null, video: null, url: null,
            init: function() { this.video = document.getElementById('player'); },
            stop: function() { if(this.hls){this.hls.destroy();this.hls=null;} this.video.pause(); this.video.removeAttribute('src'); this.video.load(); },
            play: function(url, isLive) {
                this.stop(); this.url = url;
                if(isLive && url.includes('.ts')) url = url.replace('.ts', '.m3u8');
                if(Hls.isSupported()) {
                    this.hls = new Hls(); this.hls.loadSource(url); this.hls.attachMedia(this.video);
                    this.hls.on(Hls.Events.MANIFEST_PARSED, ()=>{this.video.play().catch(e=>{})});
                } else { this.video.src = url; this.video.play(); }
            }
        };

        var App = {
            scr: 0, zone: 0, idx: 0, creds: {}, fullData: [], catData: [],
            init: function() {
                if(localStorage.getItem('rc_h')) {
                    document.getElementById('i0').value = localStorage.getItem('rc_h');
                    document.getElementById('i1').value = localStorage.getItem('rc_u');
                    document.getElementById('i2').value = localStorage.getItem('rc_p');
                }
                PlayerEngine.init();
                setInterval(()=>{var d=new Date();document.getElementById('clock-time').innerText=d.getHours()+':'+(d.getMinutes()<10?'0':'')+d.getMinutes();},1000);
                this.updateFocus();
            },
            req: function(url, cb) {
                var x = new XMLHttpRequest(); x.open("GET", url, true); 
                x.onload = function() { if(x.status===200) cb(JSON.parse(x.responseText)); else cb(null); }; 
                x.send();
            },
            login: function() {
                var h = document.getElementById('i0').value, u = document.getElementById('i1').value, p = document.getElementById('i2').value;
                document.getElementById('loader').classList.remove('hide');
                this.req(h+"/player_api.php?username="+u+"&password="+p, (d)=>{
                    document.getElementById('loader').classList.add('hide');
                    if(d && d.user_info && d.user_info.auth==1) {
                        App.creds={h:h,u:u,p:p};
                        localStorage.setItem('rc_h', h); localStorage.setItem('rc_u', u); localStorage.setItem('rc_p', p);
                        document.getElementById('info-exp').innerText = d.user_info.exp_date ? new Date(d.user_info.exp_date*1000).toLocaleDateString("pt-BR") : "Ilimitado";
                        App.setScr(1);
                    } else document.getElementById('msg-login').innerText="Erro de Login";
                });
            },
            logout: function() { localStorage.clear(); location.reload(); },
            setScr: function(n) {
                document.querySelectorAll('.layer').forEach(l=>l.classList.add('hide'));
                if(n===0) document.getElementById('login-layer').classList.remove('hide');
                if(n===1) document.getElementById('dash-layer').classList.remove('hide');
                if(n===2) document.getElementById('content-layer').classList.remove('hide');
                this.scr=n; this.zone=0; this.idx=0; this.updateFocus();
            },
            openMode: function(m) {
                this.mode = m; this.setScr(2);
                var act = (m==='live')?'get_live_categories':(m==='movie'?'get_vod_categories':'get_series_categories');
                this.req(this.creds.h+"/player_api.php?username="+this.creds.u+"&password="+this.creds.p+"&action="+act, (d)=>{
                    if(d) {
                        this.catData = d;
                        var h = ''; d.forEach((c,i)=>{h+='<div class="cat-item" id="c'+i+'" data-id="'+c.category_id+'" onclick="App.catClick('+i+')">'+c.category_name+'</div>'});
                        document.getElementById('cat-list').innerHTML = h; App.catClick(0);
                    }
                });
            },
            catClick: function(i) {
                this.idx = i; this.zone = 0; var cid = this.catData[i].category_id;
                document.querySelectorAll('.cat-item').forEach(e=>e.classList.remove('active')); document.getElementById('c'+i).classList.add('active');
                var act = (this.mode==='live')?'get_live_streams':(this.mode==='movie'?'get_vod_streams':'get_series');
                this.req(this.creds.h+"/player_api.php?username="+this.creds.u+"&password="+this.creds.p+"&action="+act+"&category_id="+cid, (d)=>{
                    if(d) { App.fullData = d; App.renderList(); }
                });
            },
            renderList: function() {
                var h = ''; App.fullData.slice(0,100).forEach((item, i)=>{
                    h += '<div class="item" id="row-'+i+'" onclick="App.playItem('+i+')">'+(item.name || item.title)+'</div>';
                });
                document.getElementById('item-list').innerHTML = h; this.zone = 2; this.idx = 0; this.updateFocus();
            },
            playItem: function(i) {
                var item = App.fullData[i]; var id = item.stream_id || item.series_id;
                var ext = item.container_extension || 'mp4'; if(this.mode==='live') ext = 'ts';
                var url = this.creds.h+"/"+this.mode+"/"+this.creds.u+"/"+this.creds.p+"/"+id+"."+ext;
                document.getElementById('meta-title').innerText = item.name || item.title;
                PlayerEngine.play(url, this.mode==='live');
            },
            updateFocus: function() {
                document.querySelectorAll('.focused').forEach(e=>e.classList.remove('focused'));
                var el;
                if(this.scr===0) el=document.getElementById('i'+this.idx);
                if(this.scr===1) el=document.getElementById('m'+this.idx);
                if(this.scr===2) {
                    if(this.zone===0) el=document.getElementById('c'+this.idx);
                    if(this.zone===1) el=document.getElementById('search');
                    if(this.zone===2) el=document.getElementById('row-'+this.idx);
                    if(this.zone===3) el=document.getElementById('vid-box');
                }
                if(el) { el.classList.add('focused'); el.scrollIntoView({block:'center'}); }
            },
            move: function(d) {
                if(this.scr===0) { // Navegação Login
                    if(d===1 && this.idx < 3) this.idx++; // Seta Baixo
                    if(d===0 && this.idx > 0) this.idx--; // Seta Cima
                }
                else if(this.scr===1) { // Navegação Menu Principal
                    if(d===3 && this.idx < 3) this.idx++; // Seta Direita
                    if(d===2 && this.idx > 0) this.idx--; // Seta Esquerda
                }
                else if(this.scr===2) { // Navegação Conteúdo
                    if(this.zone===0) { // Categorias
                        if(d===1) this.idx++;
                        if(d===0 && this.idx > 0) this.idx--;
                        if(d===3) { this.zone=2; this.idx=0; }
                    } else if(this.zone===2) { // Lista de Itens
                        if(d===1) this.idx++;
                        if(d===0 && this.idx > 0) this.idx--;
                        if(d===2) { this.zone=0; this.idx=0; }
                    }
                }
                this.updateFocus();
            },
            enter: function() {
                if(this.scr===0) { if(this.idx===3) this.login(); }
                else if(this.scr===1) { if(this.idx===3) this.logout(); else this.openMode(['live','movie','series'][this.idx]); }
                else if(this.scr===2) { if(this.zone===0) this.catClick(this.idx); else if(this.zone===2) this.playItem(this.idx); }
            }
        };

        document.addEventListener('keydown', (e)=>{
            var k = e.keyCode;
            if(k===38) { e.preventDefault(); App.move(0); } // Cima
            if(k===40) { e.preventDefault(); App.move(1); } // Baixo
            if(k===37) { e.preventDefault(); App.move(2); } // Esquerda
            if(k===39) { e.preventDefault(); App.move(3); } // Direita
            if(k===13) { e.preventDefault(); App.enter(); } // Enter
        });
    </script>
</body>
</html>
