<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <title>SKY GOLD IPTV</title>
    <style>
        /* --- VARI√ÅVEIS DE COR (TEMA SKY GOLD DARK) --- */
        :root {
            --gold-accent: #FFD700; /* Dourado Principal */
            --gold-dark: #DAA520;   /* Dourado mais escuro para detalhes */
            --bg-main: #0a0a0a;     /* Preto quase absoluto */
            --bg-panel: #141414;    /* Fundo de pain√©is */
            --bg-item: #1f1f1f;     /* Fundo de itens/inputs */
            --text-primary: #ffffff;
            --text-secondary: #b3b3b3;
        }

        /* --- ESTILO GERAL OTIMIZADO PARA TV --- */
        body, html {
            margin: 0; padding: 0;
            width: 100%; height: 100%;
            background-color: var(--bg-main);
            color: var(--text-primary);
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            overflow: hidden;
            user-select: none;
        }

        /* Classes Utilit√°rias */
        .hidden { display: none !important; }
        .view {
            width: 100%; height: 100%;
            position: absolute; top: 0; left: 0;
            display: flex; flex-direction: column;
            align-items: center; justify-content: center;
        }

        /* ESTADOS DE FOCO (CRUCIAL PARA TV) */
        /* Otimizado: usa box-shadow e border cores, sem anima√ß√µes pesadas */
        input:focus, button:focus, .item:focus, .card:focus {
            border-color: var(--gold-accent) !important;
            box-shadow: 0 0 20px rgba(255, 215, 0, 0.3); /* Brilho dourado suave */
            outline: none;
            transform: scale(1.02); /* Leve aumento para feedback visual */
        }

        /* --- TELA DE LOGIN --- */
        #login-view {
            /* Gradiente sutil e escuro */
            background: linear-gradient(135deg, var(--bg-main) 0%, var(--bg-panel) 100%);
        }
        .logo {
            font-size: 3.5em; font-weight: 800; margin-bottom: 40px;
            text-transform: uppercase; letter-spacing: 4px;
            color: var(--text-primary);
        }
        .logo span { 
            color: var(--gold-accent);
            text-shadow: 0 0 10px rgba(255, 215, 0, 0.4); /* Leve brilho no GOLD */
        }

        .input-group {
            display: flex; flex-direction: column; gap: 15px; width: 320px;
        }
        input {
            padding: 15px; border-radius: 4px; 
            border: 2px solid var(--bg-item); /* Borda discreta inicialmente */
            background: var(--bg-item); 
            color: var(--text-primary); font-size: 1.1em; outline: none;
            transition: border-color 0.2s;
        }
        ::placeholder { color: var(--text-secondary); }

        button {
            padding: 15px; 
            background: linear-gradient(to bottom, var(--gold-accent), var(--gold-dark)); /* Bot√£o dourado met√°lico */
            color: #000; /* Texto preto para contraste no dourado */
            font-weight: 900; border: none; font-size: 1.2em; cursor: pointer;
            border-radius: 4px;
            border: 2px solid transparent;
            text-transform: uppercase; letter-spacing: 1px;
        }

        /* --- MENU PRINCIPAL (HOME) --- */
        #home-view {
            flex-direction: row; gap: 30px;
            background: var(--bg-main);
        }
        .card {
            width: 220px; height: 260px;
            background: var(--bg-panel);
            border: 2px solid transparent;
            display: flex; flex-direction: column;
            align-items: center; justify-content: center;
            border-radius: 8px; transition: all 0.2s;
        }
        .card i { font-size: 3.5em; margin-bottom: 20px; color: var(--text-secondary); transition: color 0.2s;}
        /* Quando focar no card, o √≠cone fica dourado */
        .card:focus i { color: var(--gold-accent); }
        .card-title { font-size: 1.4em; font-weight: bold; }

        /* --- TELA DE CANAIS --- */
        #channels-view {
            display: grid;
            grid-template-columns: 280px 1fr; 
            grid-template-rows: 60px 1fr;
            width: 100%; height: 100%;
            background: var(--bg-main);
        }

        .top-bar {
            grid-column: 1 / -1;
            background: var(--bg-panel);
            /* Linha dourada fina no topo para separar */
            border-bottom: 2px solid var(--gold-dark);
            display: flex; align-items: center; padding: 0 25px;
            font-size: 1.3em; font-weight: bold; color: var(--gold-accent);
            letter-spacing: 1px;
        }

        .category-list {
            background: var(--bg-panel);
            overflow-y: auto;
            border-right: 1px solid #333;
            padding: 10px 0;
        }

        .channel-area {
            display: flex; flex-direction: column;
            background: var(--bg-main);
            padding: 20px;
            position: relative;
        }

        .video-preview-container {
            width: 100%;
            height: 420px;
            background: #000;
            margin-bottom: 20px;
            border: 2px solid var(--bg-item); /* Borda discreta */
            position: relative;
             box-shadow: 0 10px 20px rgba(0,0,0,0.5);
        }
        /* Quando o player est√° ativo ou focado indiretamente, borda dourada */
        .video-preview-container.active-play {
             border-color: var(--gold-dark);
        }

        video { width: 100%; height: 100%; object-fit: contain; }

        .channel-list-items {
            flex: 1; overflow-y: auto;
            display: grid; grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
            gap: 12px; align-content: start;
        }

        .item {
            padding: 12px; background: var(--bg-item);
            border: 2px solid transparent;
            border-radius: 4px;
            text-align: center; white-space: nowrap;
            overflow: hidden; text-overflow: ellipsis;
            cursor: pointer; font-weight: 500;
            transition: all 0.1s;
        }
        /* Item que est√° tocando atualmente */
        .item.playing {
            color: var(--gold-accent); 
            border-color: var(--gold-accent);
            background-color: rgba(255, 215, 0, 0.05); /* Fundo dourado muito sutil */
            font-weight: bold;
        }
         .item:focus {
             background-color: var(--bg-item) !important; /* Reseta fundo no foco para n√£o misturar */
         }

    </style>
</head>
<body>

    <div id="login-view" class="view">
        <div class="logo">SKY <span>GOLD</span></div>
        <div class="input-group">
            <input type="text" id="server" placeholder="URL do Servidor (http://...)" value="http://">
            <input type="text" id="username" placeholder="Usu√°rio">
            <input type="password" id="password" placeholder="Senha">
            <button id="btn-login" onclick="app.login()">ENTRAR NA SKY GOLD</button>
        </div>
    </div>

    <div id="home-view" class="view hidden">
        <div class="card" tabindex="0" onclick="app.openLiveTV()" data-nav="true">
            <i>üì∫</i>
            <span class="card-title">TV ao Vivo</span>
        </div>
        <div class="card" tabindex="0" data-nav="true">
            <i>üé¨</i>
            <span class="card-title">Filmes On-Demand</span>
        </div>
        <div class="card" tabindex="0" data-nav="true">
            <i>üçø</i>
            <span class="card-title">S√©ries</span>
        </div>
    </div>

    <div id="channels-view" class="view hidden">
        <div class="top-bar">SKY GOLD AO VIVO <span id="clock" style="margin-left:auto; font-size:0.8em; color:var(--text-secondary);">00:00</span></div>
        
        <div class="category-list" id="cat-list">
            </div>

        <div class="channel-area">
            <div class="video-preview-container" id="preview-box">
                <video id="main-player"></video>
                <div id="loading-msg" style="position:absolute; top:50%; left:50%; transform:translate(-50%,-50%); display:none; color: var(--gold-accent);">Carregando...</div>
            </div>
            
            <div class="channel-list-items" id="chan-list">
                </div>
        </div>
    </div>

    <script>
        /**
         * L√ìGICA DO APLICATIVO (Id√™ntica √† anterior, apenas ajustes visuais)
         */
        const app = {
            data: {
                server: '', user: '', pass: '',
                categories: [], channels: [],
                currentStreamUrl: null
            },
            
            init: function() {
                document.getElementById('server').focus();
                this.updateClock();
                setInterval(this.updateClock, 60000);
            },

            updateClock: function() {
                const now = new Date();
                const time = now.getHours().toString().padStart(2,'0') + ":" + now.getMinutes().toString().padStart(2,'0');
                const clock = document.getElementById('clock');
                if(clock) clock.innerText = time;
            },

            login: function() {
                this.data.server = document.getElementById('server').value.replace(/\/$/, "");
                this.data.user = document.getElementById('username').value;
                this.data.pass = document.getElementById('password').value;

                if(!this.data.server || !this.data.user || !this.data.pass) {
                    // Exemplo de feedback visual simples
                    document.getElementById('btn-login').innerText = "PREENCHA TUDO!";
                    setTimeout(() => document.getElementById('btn-login').innerText = "ENTRAR NA SKY GOLD", 2000);
                    return;
                }

                // --- MOCK DATA (Substitua pela sua chamada API Xtream real) ---
                this.mockDataLoad(); 
                // -----------------------------------------------------------
                
                document.getElementById('login-view').classList.add('hidden');
                document.getElementById('home-view').classList.remove('hidden');
                setTimeout(() => document.querySelector('.card').focus(), 100);
            },

            mockDataLoad: function() {
                this.data.categories = ['Variedades', 'Esportes Gold', 'Telecine', 'Not√≠cias 24h', 'Infantil'];
                this.data.channels = [];
                for(let i=1; i<=25; i++) {
                    this.data.channels.push({
                        name: `SKY Gold Canal ${i}`,
                        stream_id: i,
                        // URL de teste p√∫blica
                        url: 'http://commondatastorage.googleapis.com/gtv-videos-bucket/sample/BigBuckBunny.mp4' 
                    });
                }
            },

            openLiveTV: function() {
                document.getElementById('home-view').classList.add('hidden');
                document.getElementById('channels-view').classList.remove('hidden');
                this.renderCategories();
                this.renderChannels();
            },

            renderCategories: function() {
                const list = document.getElementById('cat-list');
                list.innerHTML = '';
                this.data.categories.forEach((cat, index) => {
                    const div = document.createElement('div');
                    div.className = 'item';
                    div.innerText = cat;
                    div.tabIndex = 0;
                    list.appendChild(div);
                });
            },

            renderChannels: function() {
                const list = document.getElementById('chan-list');
                list.innerHTML = '';
                this.data.channels.forEach((chan) => {
                    const div = document.createElement('div');
                    div.className = 'item';
                    div.innerText = chan.name;
                    div.tabIndex = 0;
                    div.onclick = () => this.handleChannelClick(div, chan.url);
                    list.appendChild(div);
                });
                
                setTimeout(() => {
                    const firstCat = document.querySelector('#cat-list .item');
                    if(firstCat) firstCat.focus();
                }, 100);
            },

            handleChannelClick: function(element, url) {
                const player = document.getElementById('main-player');
                const previewBox = document.getElementById('preview-box');
                
                // L√≥gica de 2 Cliques (Preview -> Fullscreen)
                if (this.data.currentStreamUrl === url && !player.paused) {
                    if (player.requestFullscreen) player.requestFullscreen();
                    else if (player.webkitRequestFullscreen) player.webkitRequestFullscreen();
                    else if (player.mozRequestFullScreen) player.mozRequestFullScreen();
                    else if (player.msRequestFullscreen) player.msRequestFullscreen();
                } 
                else {
                    document.querySelectorAll('.item').forEach(i => i.classList.remove('playing'));
                    element.classList.add('playing');
                    previewBox.classList.add('active-play'); // Adiciona borda dourada ao player

                    this.data.currentStreamUrl = url;
                    // NOTA: Se for Xtream real, monte a URL aqui:
                    // const finalUrl = `${this.data.server}/live/${this.data.user}/${this.data.pass}/${chan.stream_id}.ts`;
                    player.src = url;
                    player.play();
                }
            }
        };

        /**
         * CONTROLE REMOTO (KeyMapping Gen√©rico para TVs)
         */
        document.addEventListener('keydown', function(e) {
            const key = e.keyCode;
            const active = document.activeElement;
            
            // Enter (OK)
            if (key === 13) { 
                if (active && active.onclick) active.click();
            }
            
            // Voltar / Back (C√≥digos comuns: 461, 8, 10009, 27)
            else if ([461, 8, 10009, 27].includes(key)) { 
                if(!document.getElementById('channels-view').classList.contains('hidden')) {
                    // Se estiver na tela de canais, para o v√≠deo e volta pra home
                    const player = document.getElementById('main-player');
                    player.pause(); player.src = "";
                    document.getElementById('preview-box').classList.remove('active-play');
                    
                    document.getElementById('channels-view').classList.add('hidden');
                    document.getElementById('home-view').classList.remove('hidden');
                    document.querySelector('.card').focus(); 
                } else if (!document.getElementById('home-view').classList.contains('hidden')) {
                    document.getElementById('home-view').classList.add('hidden');
                    document.getElementById('login-view').classList.remove('hidden');
                    document.getElementById('server').focus();
                }
            }
            // As setas (37,38,39,40) s√£o tratadas nativamente pelo navegador da TV
            // gra√ßas ao uso de tabIndex="0" nos elementos foc√°veis.
        });

        window.onload = () => app.init();

    </script>
</body>
</html>
